name: base
platform: windows
os: windows
version: '10'
release: '22H2'
sections:
    - name: core
      type: winget_packages
      pre_install: |
        Write-Host "Updating winget sources..."
        winget source update
      install:
        - Microsoft.VisualStudioCode
        - Git.Git
        - Microsoft.WindowsTerminal
        - 7zip.7zip
      post_install: |
        Write-Host "Core tools installed"

    - name: python
      type: chocolatey_packages
      install:
        - python3
      post_install: |
        refreshenv
        python --version

    - name: python-packages
      type: python_packages
      install:
        - pip
        - virtualenv
        - pytest

    - name: dev-essentials
      type: chocolatey_packages
      install:
        - vscode
        - git
        - nodejs-lts
        - curl
        - wget

    - name: configuration
      type: powershell
      install: |
        # Set execution policy
        Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser -Force

        # Create development directories
        $devDirs = @("$env:USERPROFILE\dev", "$env:USERPROFILE\projects")
        foreach ($dir in $devDirs) {
            if (-not (Test-Path $dir)) {
                New-Item -ItemType Directory -Path $dir -Force | Out-Null
            }
        }
        Write-Host "Configuration completed"
